<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Koperasi Web</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="container">
      <header class="header">
        <h1>ğŸ“¦ Koperasi Web</h1>
        <p>Kasir & pembukuan barang berbasis Google Spreadsheet</p>
      </header>

      <section id="loginView" class="card login-card">
        <h2>ğŸ” Login Admin</h2>
        <form id="loginForm">
          <label>
            ğŸ‘¤ Username
            <input id="username" type="text" placeholder="Masukkan username" required />
          </label>
          <label>
            ğŸ”‘ Password
            <input id="password" type="password" placeholder="Masukkan password" required />
          </label>
          <button type="submit" id="loginBtn">Masuk</button>
        </form>
        <p id="loginError" class="error"></p>
      </section>

      <section id="appView" class="hidden">
        <div class="toolbar card">
          <div>
            <span id="adminBadge">ğŸ‘¤ Admin</span>
          </div>
          <div class="actions">
            <button class="secondary" data-tab="kasir">ğŸ’³ Kasir</button>
            <button class="secondary" data-tab="barang">ğŸ“Š Pembukuan</button>
            <button id="refreshBtn" class="secondary">ğŸ”„ Refresh</button>
            <button id="logoutBtn" class="danger">ğŸšª Logout</button>
          </div>
        </div>

        <section id="kasirTab" class="tab-panel card">
          <h2>ğŸ’³ Kasir</h2>
          <form id="txMetaForm" class="grid-2">
            <label>
              ğŸ‘¤ Nama Anggota (opsional)
              <input id="memberName" type="text" placeholder="Nama pemesan" />
            </label>
            <label>
              ğŸ’° Metode Bayar
              <select id="paymentMethod">
                <option value="cash">ğŸ’µ Cash</option>
                <option value="transfer">ğŸ¦ Transfer</option>
                <option value="qris">ğŸ“± QRIS</option>
              </select>
            </label>
          </form>

          <div class="row-between">
            <h3>ğŸ›’ Item Transaksi</h3>
            <button id="addTxItemBtn" type="button" class="secondary">+ Tambah Item</button>
          </div>

          <table>
            <thead>
              <tr>
                <th>Barang</th>
                <th>Qty</th>
                <th>Harga</th>
                <th>Subtotal</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody id="txItemsBody"></tbody>
          </table>

          <div class="row-between total-wrap">
            <strong>ğŸ“Š Total</strong>
            <strong id="txTotal">Rp 0</strong>
          </div>

          <button id="saveTxBtn" type="button">âœ… Simpan Transaksi</button>

          <h3>ğŸ“ Riwayat Transaksi</h3>
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Waktu</th>
                <th>Kasir</th>
                <th>Anggota</th>
                <th>Metode</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody id="txHistoryBody"></tbody>
          </table>
        </section>

        <section id="barangTab" class="tab-panel card hidden">
          <h2>ğŸ“Š Pembukuan Barang</h2>

          <h3>ğŸ“¦ Input / Update Barang</h3>
          <form id="productForm" class="grid-3">
            <label>
              ğŸ·ï¸ Kode Barang (ID)
              <input id="productId" type="text" placeholder="Kosongkan untuk auto" />
            </label>
            <label>
              ğŸ“ Nama Barang
              <input id="productName" type="text" placeholder="Nama item" required />
            </label>
            <label>
              ğŸ’µ Harga Jual
              <input id="sellPrice" type="number" min=\"0\" step=\"1\" placeholder=\"0\" required />
            </label>
            <label>
              ğŸ’° Harga Beli
              <input id=\"buyPrice\" type=\"number\" min=\"0\" step=\"1\" placeholder=\"0\" required />
            </label>
            <label>
              ğŸ“¦ Stok
              <input id=\"stock\" type=\"number\" min=\"0\" step=\"1\" placeholder=\"0\" required />
            </label>
            <label>
              âš ï¸ Minimum Stok
              <input id=\"minStock\" type=\"number\" min=\"0\" step=\"1\" placeholder=\"0\" required />
            </label>
            <div class=\"span-3\">
              <button type=\"submit\">âœ… Simpan Barang</button>
            </div>
          </form>

          <h3>ğŸ”„ Penyesuaian Stok</h3>
          <form id=\"adjustmentForm\" class=\"grid-4\">
            <label>
              ğŸ“¦ Barang
              <select id=\"adjustProductId\" required></select>
            </label>
            <label>
              ğŸ”„ Tipe
              <select id=\"adjustType\" required>
                <option value=\"IN\">â• IN (Tambah)</option>
                <option value=\"OUT\">â– OUT (Kurang)</option>
              </select>
            </label>
            <label>
              ğŸ”¢ Jumlah
              <input id=\"adjustQty\" type=\"number\" min=\"1\" step=\"1\" placeholder=\"0\" required />
            </label>
            <label>
              ğŸ“ Catatan
              <input id=\"adjustNote\" type=\"text\" placeholder=\"mis. rusak, retur, restok\" />
            </label>
            <div class=\"span-4\">
              <button type=\"submit\">âœ… Simpan Penyesuaian</button>
            </div>
          </form>

          <h3>ğŸ“‹ Daftar Barang</h3>
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Nama</th>
                <th>Harga Jual</th>
                <th>Harga Beli</th>
                <th>Stok</th>
                <th>Min Stok</th>
              </tr>
            </thead>
            <tbody id="productsBody"></tbody>
          </table>

          <h3>ğŸ“Š Riwayat Pergerakan Stok</h3>
          <table>
            <thead>
              <tr>
                <th>Waktu</th>
                <th>Barang</th>
                <th>Tipe</th>
                <th>Qty</th>
                <th>Saldo</th>
                <th>Catatan</th>
                <th>Petugas</th>
              </tr>
            </thead>
            <tbody id="movementsBody"></tbody>
          </table>
        </section>
      </section>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal-backdrop hidden">
      <div class="modal">
        <div class="modal-header">
          <h3>âœ… Sukses</h3>
        </div>
        <div class="modal-body">
          <p id="successMsg"></p>
        </div>
        <div class="modal-footer">
          <button id="successModalBtn" type="button">OK</button>
        </div>
      </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal-backdrop hidden">
      <div class="modal">
        <div class="modal-header">
          <h3>âŒ Error</h3>
        </div>
        <div class="modal-body">
          <p id="errorMsg"></p>
        </div>
        <div class="modal-footer">
          <button id="errorModalBtn" type="button">OK</button>
        </div>
      </div>
    </div>

    <script src="/app.js"></script>
  </body>
</html>
